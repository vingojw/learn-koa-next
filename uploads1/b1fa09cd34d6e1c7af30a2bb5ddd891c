<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	
	<script>

	//在 a = 1; 这种情况下才能监听到, 如果是全局  var a =1;则监听不到
	window.__defineSetter__('a', function(){ debugger });

	(function(){
		var ivalue; //用一个值存一下
		Object.defineProperty(window, "i", {
		    get : function(e){ return ivalue;},
		    set : function(newValue){ ivalue = newValue;debugger;},
		    enumerable : true,
		    configurable : true
		});
	})();


	i=1;
	a = 1;
	var b =1;  //可以在全局变量中找到， 但是不能通过  window.__defineSetter__ 监听到


	//打印全局变量
	(function(){
		var ifr = document.createElement('iframe');
		document.body.appendChild(ifr);  //插入到body之后才能拿到
		ifr.style.display = 'none'
		var cleanArr = Object.keys(ifr.contentWindow);
		var filterArr = Object.keys(window).filter(function(a){
			return cleanArr.indexOf(a) == -1;
		});
		console.log('全局变量'+filterArr);
		console.log(`
			如果需要监控
			在脚本开始的时候载入 
			window.__defineSetter__('变量名', function(){ debugger });
		`)
	})();

	</script>
</body>
</html>